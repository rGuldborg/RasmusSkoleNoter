## a. Opret Virtual Machine (VM) på Azure

### i. Opret SSH Key lokalt

1. Åbn **Git Bash**.
    
2. Navigér til den folder, hvor dine nøgler skal gemmes.
    
3. Kør:
    

```bash
ssh-keygen -t rsa -b 4096
```


- Tryk **Enter** for filnavn.
    
- Tryk **Enter** to gange for passphrase.
    
- Nøglerne ligger typisk i `~/.ssh/`
    

4. Tjek nøgler:
    

```bash
ls ~/.ssh
```


- Skal vise: `id_rsa` (private) og `id_rsa.pub` (public).
    

> Public key bruges ved oprettelse af VM på Azure.

---

### ii. Opret VM på Azure

1. Gå til **+Create a resource → Virtual Machine**.
    
2. Opret en **resource group** (fx afslut navnet med `grp`).
    
3. Vælg:
    
    - VM navn
        
    - Region (fx North Europe)
        
    - Image (fx Ubuntu 22.04)
        
    - CPU / størrelse
        
    - Zone (lad Azure vælge)
        
    - Security type (fx Trusted)
        
4. SSH strategi: **Use existing public key** → indsæt `id_rsa.pub`.
    
5. Vælg **Inbound ports**: SSH + HTTP.
    
6. Tryk **Review + Create → Create**.
    
7. Vent til VM er oprettet → få tildelt **public IP**.
    

---

### iii. Connect til VM

1. Åbn Git Bash.
    
2. Skriv:
    

```bash
ssh azureuser@<VM-IP>
```


- Første login: svar `yes`.
    
- Nu er du inde på Ubuntu terminal.
    

> Standardfolder: `/home/azureuser`  
> SSH keys ligger i `.ssh`.  
> Brug `sudo` til admin-kommandoer.

---

## b. Installer Docker på Azure VM

1. Opdater pakker:
    

```bash
sudo apt-get update
```


2. Installer Docker:
    

```bash
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```


3. Test Docker:
    

```bash
sudo docker images
sudo docker run hello-world
```


- Husk at bruge `sudo` på Ubuntu.
    

---

## c. Kør MySQL i Docker på Azure VM

### i. Pull image

```bash
sudo docker pull mysql:8.0.28
```


### ii. Start container

```bash
sudo docker run --name DB-players --restart unless-stopped -p 3306:3306 -e MYSQL_ROOT_PASSWORD=test-1234 -d mysql:8.0.28
```


- `-e` = environment variables (fx root password)
    
- `--restart unless-stopped` = container genstarter automatisk
    

### iii. Adgang til container

```bash
sudo docker exec -it DB-players bash
```


- Inde i container:
    

```bash
mysql -u root -p
```


- Password = `test-1234`
    

### iv. SQL-eksempler

```bash
show databases;
create database dummy_db;
show databases;
drop database dummy_db;
show databases;
```


### v. Opret non-root bruger

```bash
CREATE USER 'a_user'@'%' IDENTIFIED BY 'a_safe_password';
GRANT ALL ON *.* TO 'a_user'@'%';
SELECT User, Host FROM mysql.user;
show grants for 'a_user'@'%';
CREATE DATABASE spring_db;
```


---

## d. Azure Networking for MySQL

1. Gå til VM → **Networking**
    
2. **Add inbound security rule** → Service = MySQL
    
3. Vent et par minutter → port 3306 åbnes